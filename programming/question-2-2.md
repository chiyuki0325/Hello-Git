# 编译

计算机编程语言的编译分为如下几个阶段：

- 词法分析。通过使用有限状态机，将字符串形式的编程语言切割为一个个的 tokens，把语言关键字、操作符号和变量名等分开。

- 语法分析。编译器此时通过[各种算法](https://www.nosuchfield.com/2017/07/30/Talk-about-compilation-principles-2/)，检查代码是否符合语言语法规则，如大括号，缩进等等，之后生成初步的语法树。

- 语义分析。编译器检查代码逻辑，并给每条语句，操作，函数调用等生成抽象语法树（AST）。

  如 `0 + 'a'` 之类的语义错误会在此阶段被查出。

- 生成代码。LLVM 等编译器此时会生成中间代码（IR）并进行优化，也有其它编译器直接生成本机代码。

- 链接。链接器把各个目标代码文件和库文件链接到一起，生成最终的可执行程序。

可以通过 [Compiler Explorer](https://github.com/compiler-explorer/compiler-explorer) 查看每个编程语言和编译器的工作方式，以及生成的目标代码。

### 花絮

我一开始想了解编译器其实是从[这个视频](https://www.bilibili.com/video/BV1va41197SR/)，从抽象的东西看到了正经知识。
